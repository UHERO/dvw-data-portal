<div *ngIf="selectors$ | async as selectors; else loading">
  <ng-template ngFor let-selector [ngForOf]="selectors">
    <label>{{selector.name}}</label>
    <select (ngModelChange)="change($event, selector.name)" #dimension class="form-control" [(ngModel)]="selectedDimensions" multiple [id]="selector.name">
      <ng-container *ngFor="let opt of selector.options; let i = index;">
        <ng-container *ngIf="!opt.children">
          <option [ngValue]="opt">{{opt.nameW}}</option>
        </ng-container>
        <ng-container *ngIf="opt.header">
          <optgroup (click)="toggle(opt)" label="{{opt.active ? optgroupCollapse + ' ' + opt.nameW : optgroupExpand + ' ' + opt.nameW}}">
            <option [class.active]="opt.active" *ngFor="let child of opt.children" [ngValue]="child"
              (click)="stopProp($event)">{{child.nameW}}</option>
          </optgroup>
        </ng-container>
      </ng-container>
    </select>
  </ng-template>
  <!-- <ng-template ngFor let-selector [ngForOf]="selectors">
    <mat-form-field class="mr-3" #dimension [id]="selector.name">
      <mat-label>{{selector.name}}</mat-label>
      <mat-select (selectionChange)="change($event)" [id]="selector.name" [formControl]="dimensionSelector" multiple>
        <ng-container *ngFor="let opt of selector.options; let i = index;">
          <ng-container *ngIf="!opt.children">
            <mat-option [value]="opt">{{opt.nameW}}</mat-option>
          </ng-container>
          <ng-container *ngIf="opt.header">
            <mat-optgroup (click)="toggle(opt)">
              <i *ngIf="opt.active" class="fas fa-chevron-down"></i><i *ngIf="!opt.active" class="expand-option-group fas fa-chevron-right"></i> {{opt.nameW}}
              <mat-option [class.active]="opt.active" *ngFor="let child of opt.children"
                [value]="child" (click)="stopProp($event)">{{child.nameW}}</mat-option>
            </mat-optgroup>
          </ng-container>
        </ng-container>
      </mat-select>
    </mat-form-field>
  </ng-template> -->
</div>
<ng-template #loading>
  <mat-spinner [diameter]="50"></mat-spinner>
</ng-template>